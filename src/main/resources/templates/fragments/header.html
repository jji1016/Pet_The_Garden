<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div th:fragment="headerFragment">
    <header id="header">
        <h1>
            <a href="/index/index"><img src="/images/logo.png" alt="로고" /></a>
        </h1>
        <nav id="gnb">
            <ul>
                <li><a href="/petnote/list">동물소개</a></li>
                <li><a href="/showoff/showlist">장기자랑</a></li>
                <li><a href="/stray/protect">동물보호</a></li>
                <li><a href="/community/board">커뮤니티</a></li>
            </ul>
        </nav>

        <!-- 로그인 상태일 때 -->
        <th:block sec:authorize="isAuthenticated()">
            <a th:href="@{/petnote/profile}" id="profile" class="profile">
                <span class="img">
                    <img th:src="@{'/PTGupload/upload/' + ${#authentication.principal.loggedMember.image}}" alt="프로필 이미지" />
                </span>
                <span class="userName" th:text="${#authentication.principal.loggedMember.userName}">유저명</span>
            </a>
            <form th:action="@{/member/logout}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-logout">로그아웃</button>
            </form>
        </th:block>

        <!-- 비로그인 상태일 때 -->
        <th:block sec:authorize="isAnonymous()">
            <a th:href="@{/member/login}" class="profile">
                <span><i class="bi bi-person-circle"></i> 로그인</span>
            </a>
        </th:block>

    </header>
</div>
</html>