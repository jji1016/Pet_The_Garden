<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('반려동물 장기자랑 상세보기')}">
    <link rel="stylesheet" href="/css/showdetail.css">
</head>
<body>
<header th:replace="~{fragments/header :: header}"></header>

<div class="showdetail-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="showdetail-card">
                    <!-- 읽기 모드 -->
                    <div id="view-mode">
                        <div class="showdetail-header">
                            <h1 class="showdetail-title" th:text="${showOff.subject}">장기자랑 제목</h1>
                            <div class="showdetail-meta">
                                <span class="author" th:text="${showOff.member?.userName ?: '작성자'}">작성자</span>
                                <span class="date" th:text="${#temporals.format(showOff.regDate, 'yyyy-MM-dd HH:mm')}">2025-07-10 11:25</span>
                                <span class="likes">❤️ <span th:text="${showOff.showOffLike ?: 0}">0</span></span>
                            </div>
                        </div>
                        <div class="showdetail-content">
                            <div class="content-body" th:utext="${showOff.content}">
                                <!-- CKEditor로 작성된 HTML 내용이 여기에 표시 -->
                            </div>
                        </div>
                        <div class="showdetail-actions">
                            <button type="button" class="btn-action btn-edit" onclick="toggleEditMode()">수정하기</button>
                            <button type="button" class="btn-action btn-like" th:onclick="'increaseLike(' + ${showOff.id} + ')'">좋아요</button>
                        </div>
                    </div>

                    <!-- 수정 모드 -->
                    <div id="edit-mode" style="display: none;">
                        <div class="showdetail-header">
                            <h2 class="edit-title">장기자랑 수정하기</h2>
                        </div>
                        <form th:action="@{'/showoff/detail/' + ${showOff.id} + '/edit'}" method="post" enctype="multipart/form-data">
                            <input type="hidden" name="id" th:value="${showOff.id}">
                            <div class="edit-content">
                                <textarea id="edit-editor" name="content" th:text="${showOff.content}" rows="20"></textarea>
                            </div>
                            <div class="edit-actions">
                                <button type="submit" class="btn-action btn-submit">수정완료</button>
                                <button type="button" class="btn-action btn-cancel" onclick="cancelEdit()">취소</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{fragments/footer :: footer}"></footer>

<!-- CKEditor 스크립트 -->
<script src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js"></script>
<script src="/js/showdetail.js"></script>
</body>
</html>
